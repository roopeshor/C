<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>settings.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="m4_m4.html">m4</a></li><li><a href="WebGL.html">WebGL</a><ul class='methods'><li data-type='method'><a href="WebGL.html#background">background</a></li><li data-type='method'><a href="WebGL.html#clear">clear</a></li><li data-type='method'><a href="WebGL.html#createCustomProgram">createCustomProgram</a></li><li data-type='method'><a href="WebGL.html#createProgram">createProgram</a></li><li data-type='method'><a href="WebGL.html#createProgramFromSource">createProgramFromSource</a></li><li data-type='method'><a href="WebGL.html#createShader">createShader</a></li><li data-type='method'><a href="WebGL.html#fill">fill</a></li><li data-type='method'><a href="WebGL.html#fillRect">fillRect</a></li><li data-type='method'><a href="WebGL.html#rotateX">rotateX</a></li><li data-type='method'><a href="WebGL.html#rotateY">rotateY</a></li><li data-type='method'><a href="WebGL.html#rotateZ">rotateZ</a></li><li data-type='method'><a href="WebGL.html#scale">scale</a></li><li data-type='method'><a href="WebGL.html#setGeometry">setGeometry</a></li><li data-type='method'><a href="WebGL.html#stroke">stroke</a></li><li data-type='method'><a href="WebGL.html#translate">translate</a></li><li data-type='method'><a href="WebGL.html#triangle">triangle</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Arithmetic-Functions.html">Arithmetic-Functions</a><ul class='methods'><li data-type='method'><a href="module-Arithmetic-Functions.html#.gcd">gcd</a></li><li data-type='method'><a href="module-Arithmetic-Functions.html#.gcdArray">gcdArray</a></li><li data-type='method'><a href="module-Arithmetic-Functions.html#.lcm">lcm</a></li><li data-type='method'><a href="module-Arithmetic-Functions.html#.lcmArray">lcmArray</a></li></ul></li><li><a href="module-Arrows.html">Arrows</a><ul class='methods'><li data-type='method'><a href="module-Arrows.html#.arrow">arrow</a></li><li data-type='method'><a href="module-Arrows.html#.arrowTip">arrowTip</a></li><li data-type='method'><a href="module-Arrows.html#.curvedArrow">curvedArrow</a></li><li data-type='method'><a href="module-Arrows.html#.curvedArrowBetweenPoints">curvedArrowBetweenPoints</a></li><li data-type='method'><a href="module-Arrows.html#.curvedDoubleArrow">curvedDoubleArrow</a></li><li data-type='method'><a href="module-Arrows.html#.curvedDoubleArrowBetweenPoints">curvedDoubleArrowBetweenPoints</a></li><li data-type='method'><a href="module-Arrows.html#.doubleArrow">doubleArrow</a></li><li data-type='method'><a href="module-Arrows.html#.measurement">measurement</a></li></ul></li><li><a href="module-Braces.html">Braces</a><ul class='methods'><li data-type='method'><a href="module-Braces.html#.arcBrace">arcBrace</a></li><li data-type='method'><a href="module-Braces.html#.curlyBrace">curlyBrace</a></li></ul></li><li><a href="module-Color-Converters.html">Color-Converters</a><ul class='methods'><li data-type='method'><a href="module-Color-Converters.html#.HSLToRGB">HSLToRGB</a></li><li data-type='method'><a href="module-Color-Converters.html#.HSVToRGB">HSVToRGB</a></li><li data-type='method'><a href="module-Color-Converters.html#.RGBToHSL">RGBToHSL</a></li><li data-type='method'><a href="module-Color-Converters.html#.RGBToHSV">RGBToHSV</a></li></ul></li><li><a href="module-Color-Gradient.html">Color-Gradient</a><ul class='methods'><li data-type='method'><a href="module-Color-Gradient.html#.linearGradient">linearGradient</a></li></ul></li><li><a href="module-Color-Lerp.html">Color-Lerp</a><ul class='methods'><li data-type='method'><a href="module-Color-Lerp.html#.getInterpolatedColorList">getInterpolatedColorList</a></li><li data-type='method'><a href="module-Color-Lerp.html#.lerpColor">lerpColor</a></li><li data-type='method'><a href="module-Color-Lerp.html#.lerpColorArray">lerpColorArray</a></li><li data-type='method'><a href="module-Color-Lerp.html#.lerpColorObject">lerpColorObject</a></li></ul></li><li><a href="module-Color-Palettes.html">Color-Palettes</a></li><li><a href="module-Color-Reader.html">Color-Reader</a><ul class='methods'><li data-type='method'><a href="module-Color-Reader.html#.readColor">readColor</a></li></ul></li><li><a href="module-Colors.html">Colors</a></li><li><a href="module-Coordinate-Systems.html">Coordinate-Systems</a><ul class='methods'><li data-type='method'><a href="module-Coordinate-Systems.html#.numberLine">numberLine</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#.numberPlane">numberPlane</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#~drawAxis">drawAxis</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#~drawLabels">drawLabels</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#~drawTicks">drawTicks</a></li></ul></li><li></li><li><a href="module-Extra-Shapes.html">Extra-Shapes</a><ul class='methods'><li data-type='method'><a href="module-Extra-Shapes.html#.lens">lens</a></li><li data-type='method'><a href="module-Extra-Shapes.html#.polygonWithRatioOfCentralAngles">polygonWithRatioOfCentralAngles</a></li></ul></li><li><a href="module-Geometric-Shapes.html">Geometric-Shapes</a><ul class='methods'><li data-type='method'><a href="module-Geometric-Shapes.html#.angle">angle</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.annulus">annulus</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.annulusSector">annulusSector</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.arc">arc</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.arcBetweenPoints">arcBetweenPoints</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.bezier">bezier</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.circle">circle</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.circularSegment">circularSegment</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.ellipse">ellipse</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.equiTriangle">equiTriangle</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.getBezierControlPoints">getBezierControlPoints</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.line">line</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.point">point</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.polygon">polygon</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.quad">quad</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.rect">rect</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.regularPolygon">regularPolygon</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.regularPolygonWithRadius">regularPolygonWithRadius</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.sector">sector</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.smoothCurveThroughPoints">smoothCurveThroughPoints</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.smoothCurveThroughPointsTo">smoothCurveThroughPointsTo</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.square">square</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.triangle">triangle</a></li></ul></li><li><a href="module-Image.html">Image</a><ul class='methods'><li data-type='method'><a href="module-Image.html#.drawImage">drawImage</a></li><li data-type='method'><a href="module-Image.html#.loadImage">loadImage</a></li><li data-type='method'><a href="module-Image.html#.loadImagePromise">loadImagePromise</a></li><li data-type='method'><a href="module-Image.html#.pixel">pixel</a></li></ul></li><li><a href="module-Image-Processing.html">Image-Processing</a><ul class='methods'><li data-type='method'><a href="module-Image-Processing.html#.getPixelColor">getPixelColor</a></li><li data-type='method'><a href="module-Image-Processing.html#.hasNeighbourColor">hasNeighbourColor</a></li><li data-type='method'><a href="module-Image-Processing.html#.imageDataToColorArray">imageDataToColorArray</a></li><li data-type='method'><a href="module-Image-Processing.html#.imageToData">imageToData</a></li><li data-type='method'><a href="module-Image-Processing.html#.replaceColorInImage">replaceColorInImage</a></li></ul></li><li><a href="module-Plottter-Functions.html">Plottter-Functions</a><ul class='methods'><li data-type='method'><a href="module-Plottter-Functions.html#.functionGraph">functionGraph</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.heatPlot">heatPlot</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.parametricFunction">parametricFunction</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.plotPoints">plotPoints</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.plotPolarPoints">plotPolarPoints</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.polarFuntionGraph">polarFuntionGraph</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.polarParametricFunction">polarParametricFunction</a></li></ul></li><li><a href="module-Point-Utils.html">Point-Utils</a><ul class='methods'><li data-type='method'><a href="module-Point-Utils.html#.circleIntersection">circleIntersection</a></li><li data-type='method'><a href="module-Point-Utils.html#.dist">dist</a></li><li data-type='method'><a href="module-Point-Utils.html#.extendFromOrigin">extendFromOrigin</a></li><li data-type='method'><a href="module-Point-Utils.html#.extendFromPoint">extendFromPoint</a></li><li data-type='method'><a href="module-Point-Utils.html#.lineIntersection">lineIntersection</a></li><li data-type='method'><a href="module-Point-Utils.html#.rotateAroundOrigin">rotateAroundOrigin</a></li><li data-type='method'><a href="module-Point-Utils.html#.rotateAroundPoint">rotateAroundPoint</a></li></ul></li><li><a href="module-Random-Colors.html">Random-Colors</a><ul class='methods'><li data-type='method'><a href="module-Random-Colors.html#.randomColor">randomColor</a></li><li data-type='method'><a href="module-Random-Colors.html#.randomDefinedColor">randomDefinedColor</a></li></ul></li><li><a href="module-Random-Functions.html">Random-Functions</a><ul class='methods'><li data-type='method'><a href="module-Random-Functions.html#.randomInt">randomInt</a></li></ul></li><li><a href="module-Settings.html">Settings</a><ul class='methods'><li data-type='method'><a href="module-Settings.html#.background">background</a></li><li data-type='method'><a href="module-Settings.html#.clear">clear</a></li><li data-type='method'><a href="module-Settings.html#.cssBackground">cssBackground</a></li><li data-type='method'><a href="module-Settings.html#.endShape">endShape</a></li><li data-type='method'><a href="module-Settings.html#.fill">fill</a></li><li data-type='method'><a href="module-Settings.html#.fontFamily">fontFamily</a></li><li data-type='method'><a href="module-Settings.html#.fontSize">fontSize</a></li><li data-type='method'><a href="module-Settings.html#.fontStyle">fontStyle</a></li><li data-type='method'><a href="module-Settings.html#.fontVariant">fontVariant</a></li><li data-type='method'><a href="module-Settings.html#.fontWeight">fontWeight</a></li><li data-type='method'><a href="module-Settings.html#.getCanvasData">getCanvasData</a></li><li data-type='method'><a href="module-Settings.html#.getContextStates">getContextStates</a></li><li data-type='method'><a href="module-Settings.html#.getFont">getFont</a></li><li data-type='method'><a href="module-Settings.html#.invertXAxis">invertXAxis</a></li><li data-type='method'><a href="module-Settings.html#.invertYAxis">invertYAxis</a></li><li data-type='method'><a href="module-Settings.html#.lineCap">lineCap</a></li><li data-type='method'><a href="module-Settings.html#.lineDash">lineDash</a></li><li data-type='method'><a href="module-Settings.html#.lineHeight">lineHeight</a></li><li data-type='method'><a href="module-Settings.html#.lineJoin">lineJoin</a></li><li data-type='method'><a href="module-Settings.html#.lineTo">lineTo</a></li><li data-type='method'><a href="module-Settings.html#.loop">loop</a></li><li data-type='method'><a href="module-Settings.html#.measureText">measureText</a></li><li data-type='method'><a href="module-Settings.html#.moveTo">moveTo</a></li><li data-type='method'><a href="module-Settings.html#.noFill">noFill</a></li><li data-type='method'><a href="module-Settings.html#.noLoop">noLoop</a></li><li data-type='method'><a href="module-Settings.html#.noStroke">noStroke</a></li><li data-type='method'><a href="module-Settings.html#.putImageData">putImageData</a></li><li data-type='method'><a href="module-Settings.html#.rest">rest</a></li><li data-type='method'><a href="module-Settings.html#.restore">restore</a></li><li data-type='method'><a href="module-Settings.html#.rotate">rotate</a></li><li data-type='method'><a href="module-Settings.html#.save">save</a></li><li data-type='method'><a href="module-Settings.html#.saveCanvas">saveCanvas</a></li><li data-type='method'><a href="module-Settings.html#.scale">scale</a></li><li data-type='method'><a href="module-Settings.html#.setImageSmoothing">setImageSmoothing</a></li><li data-type='method'><a href="module-Settings.html#.startShape">startShape</a></li><li data-type='method'><a href="module-Settings.html#.stroke">stroke</a></li><li data-type='method'><a href="module-Settings.html#.strokeWidth">strokeWidth</a></li><li data-type='method'><a href="module-Settings.html#.textAlign">textAlign</a></li><li data-type='method'><a href="module-Settings.html#.textBaseline">textBaseline</a></li><li data-type='method'><a href="module-Settings.html#.transform">transform</a></li><li data-type='method'><a href="module-Settings.html#.translate">translate</a></li></ul></li><li><a href="module-Tex.html">Tex</a><ul class='methods'><li data-type='method'><a href="module-Tex.html#.getImageFromTex">getImageFromTex</a></li><li data-type='method'><a href="module-Tex.html#.tex">tex</a></li><li data-type='method'><a href="module-Tex.html#.tex2svgExists">tex2svgExists</a></li></ul></li><li><a href="module-text.html">text</a><ul class='methods'><li data-type='method'><a href="module-text.html#.fillText">fillText</a></li><li data-type='method'><a href="module-text.html#.strokeText">strokeText</a></li><li data-type='method'><a href="module-text.html#.text">text</a></li></ul></li><li><a href="module-Utils.html">Utils</a><ul class='methods'><li data-type='method'><a href="module-Utils.html#.arange">arange</a></li><li data-type='method'><a href="module-Utils.html#.defineConstant">defineConstant</a></li><li data-type='method'><a href="module-Utils.html#.defineProperties">defineProperties</a></li><li data-type='method'><a href="module-Utils.html#.fraction">fraction</a></li><li data-type='method'><a href="module-Utils.html#~getReducedFraction">getReducedFraction</a></li></ul></li><li><a href="module-Vector.html">Vector</a></li></ul><h3>Global</h3><ul><li><a href="global.html#assignCommonPropsToAxis">assignCommonPropsToAxis</a></li><li><a href="global.html#axes">axes</a></li><li><a href="global.html#C">C</a></li><li><a href="global.html#createWebGL">createWebGL</a></li><li><a href="global.html#drawMinors">drawMinors</a></li><li><a href="global.html#fontStretch">fontStretch</a></li><li><a href="global.html#generatePointsInArc">generatePointsInArc</a></li><li><a href="global.html#getAzimuthUnit">getAzimuthUnit</a></li><li><a href="global.html#getCartasianFunctions">getCartasianFunctions</a></li><li><a href="global.html#getPolarPlotters">getPolarPlotters</a></li><li><a href="global.html#polarPlane">polarPlane</a></li><li><a href="global.html#quadraticCurve">quadraticCurve</a></li><li><a href="global.html#readMatrix">readMatrix</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">settings.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module Settings */

import { readColor } from "./color/color_reader.js";
import { C } from "./main.js";
import { defineProperties } from "./utils.js";

// for debugging
let counter = {
		loop: 1,
	},
	logStyles = {
		number: "color: #9afcad;",
		keyword: "color: #adacdf;",
		running: "color: yellow;",
		delayed: "color: orange;",
		finished: "color: #3aff5f;",
	};
/**
 * Begins a new shape at the point specified by the given (x, y) coordinates.
 *
 * @param {number} x
 * @param {number} y
 */
export function moveTo(x, y) {
	C.workingContext.moveTo(x, y);
}

/**
 * Adda a straight line to the current shape by connecting the shape's last point to the specified (x, y) coordinates.
 *
 * @param {number} x
 * @param {number} y
 */
export function lineTo(x, y) {
	C.workingContext.lineTo(x, y);
}

/**
 * Sets background to a given value
 *
 * Accepted values:
 * * a hex string (#fff, #acf2dc)
 * * a number (0 for rgb(0,0,0), 233 for rgb(233,233,233))
 * * a array of numbers ([0, 244, 34])
 * @param {...number} color
 */
export function background(...color) {
	let col = readColor(color).hex8,
		ctx = C.workingContext;
	ctx.background = col;
	ctx.save();
	rest();
	ctx.fillStyle = col;
	ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
	ctx.restore();
}

/**
 * Erases the pixels in a rectangular area by setting them to transparent black.
 * TODO: explain the process
 * @param {number} [x = 0] x-axis coordinate of the rectangle's starting point.
 * @param {number} [y = 0] y-axis coordinate of the rectangle's starting point.
 * @param {number} [width = C.workingContext.width] Rectangle's width. Positive values are to the right, and negative values to the left.
 * @param {number} [height = C.workingContext.height] Rectangle's height. positive values are down, and negative are up.
 */
export function clear(x, y, width, height) {
	let ctx = C.workingContext,
		d = C.dpr;
	x = x || 0;
	y = y || 0;
	width = width || ctx.canvas.width;
	height = height || ctx.canvas.height;
	ctx.save();
	ctx.setTransform(d, 0, 0, d, 0, 0);
	ctx.clearRect(x, y, width, height);
	ctx.restore();
}

/**
 * sets the given image data as css background. If not given it will set current canvas drawing as the background
 * @param {string} [data] image data
 */
export function cssBackground(data) {
	if (typeof data != "string") data = getCanvasData();
	let canvasStyle = C.workingContext.canvas.style;
	canvasStyle.background = "url('" + data + "')";
	canvasStyle.backgroundPosition = "center";
	canvasStyle.backgroundSize = "cover";
}

/**
 * If Some arguments are given: Resets the current transformation to the identity matrix,
 * and then invokes a transformation described by given arguments.
 * Lets you scale, rotate, translate (move), and skew the canvas.
 * See {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform} for more info
 * If no Arguments are given: returns current transformation
 *
 * @param {number|DOMMatrix} [a] Horizontal scaling. A value of 1 results in no scaling.
 * @param {number} [b] Vertical skewing
 * @param {number} [c] Horizontal skewing
 * @param {number} [d] Vertical scaling. A value of 1 results in no scaling
 * @param {number} [e] Horizontal translation
 * @param {number} [f] Vertical translation
 */
export function transform(a, b, c, d, e, f) {
	let ctx = C.workingContext;
	if (a == undefined || a == null) {
		return C.workingContext.getTransform();
	} else if (a instanceof DOMMatrix) {
		ctx.setTransform(a.a, a.b, a.c, a.d, a.e, a.f);
	} else {
		ctx.setTransform(a || 0, b || 0, c || 0, d || 0, e || 0, f || 0);
	}

	// scale to fit width
	ctx.scale(C.dpr, C.dpr);
}

/**
 * Prevent filling inside shapes
 *
 */
export function noFill() {
	C.workingContext.doFill = false;
}

/**
 * Prevent drawing strokes of shapes
 *
 */
export function noStroke() {
	C.workingContext.doStroke = false;
}

/**
 * Translates (moves) canvas to a position
 *
 * @param {number} x amound to translate along x-axis
 * @param {number} [y=0] amound to translate along y-axis
 */
export function translate(x, y = 0) {
	C.workingContext.translate(x, y);
}

/**
 * Sets whether to enable image smoothening
 *
 * @param {boolean} bool
 */
export function setImageSmoothing(bool) {
	C.workingContext.imageSmoothingEnabled = !!bool;
}

/**
 * Sets the stroke width (line width/line thickness)
 *
 * @param {number} w
 */
export function strokeWidth(w) {
	C.workingContext.lineWidth = Number(w);
}

/**
 * Scales the canvas by a given amount
 *
 * @param {number} x Scaling factor in the horizontal direction. A negative value flips pixels across
 *  the vertical axis. A value of 1 results in no horizontal scaling.
 * @param {number} [y=x] Scaling factor in the vertical direction. A negative value flips pixels across
 *  the horizontal axis. A value of 1 results in no vertical scaling.
 */
export function scale(x, y = x) {
	C.workingContext.scale(x, y);
}

/**
 * inverts y-Axis
 */
export function invertYAxis() {
	C.workingContext.scale(1, -1);
	C.workingContext.yAxisInverted = !C.workingContext.yAxisInverted;
}

/**
 * inverts x-Axis
 */
export function invertXAxis() {
	C.workingContext.scale(-1, 1);
	C.workingContext.xAxisInverted = !C.workingContext.xAxisInverted;
}

/**
 * Rotates the canvas
 *
 * @param {number} angle The rotation angle, clockwise in radians. You can use degree * DEG to calculate a radian from a degree.
 */
export function rotate(angle) {
	let ctx = C.workingContext;
	ctx.rotate(angle);
	ctx.netRotation = ((ctx.netRotation + angle) % Math.PI) * 2;
}

/**
 * Saves the current state of canvas

 */
export function save() {
	C.workingContext.savedStates = getContextStates();
	C.workingContext.save();
}

/**
 * Set the type of line end
 * Options: butt, round, square
 *
 * @param {string} capType
 */
export function lineCap(capType) {
	C.workingContext.lineCap = capType;
}

/**
 * Sets type of line joining
 * Options: BEVEL, ROUND, MITER
 *
 * @param {string} joinType
 */
export function lineJoin(joinType) {
	C.workingContext.lineJoin = joinType;
}

/**
 * Restore the saved state of canvas
 *
 */
export function restore() {
	defineProperties(C.workingContext.savedStates, C.workingContext);
	C.workingContext.restore();
}

/**
 * Reset the applied transform to idendity matrix and scales canvas by dpr
 *
 */
export function rest() {
	let ctx = C.workingContext;
	ctx.setTransform(C.dpr, 0, 0, C.dpr, 0, 0);
}

/**
 * Sets stroke color to a given value if value is given
 * else strokes the previous shape
 *
 * Accepted values:
 * * hex string (#fff, #acf2dc)
 * * number (0 for rgb(0,0,0), 233 for rgb(233,233,233))
 * * array of numbers ([0, 244, 34]). This gets converted into css color by the colorMode property
 */
export function stroke(...color) {
	let ctx = C.workingContext;
	if (arguments.length > 0) {
		ctx.strokeStyle = readColor(color).hex8;
		ctx.doStroke = true;
	} else {
		ctx.stroke();
	}
}

/**
 * Sets fill color to a given value if value is given
 * else fills the previous shape
 *
 * Accepted values:
 * * a hex string (#fff, #acf2dc)
 * * a number (0 for rgb(0,0,0), 233 for rgb(233,233,233))
 * * a array of numbers ([0, 244, 34]). This gets converted into css color by the colorMode property
 */
export function fill(...color) {
	let ctx = C.workingContext;
	if (arguments.length !== 0) {
		ctx.fillStyle = readColor(color).hex8;
		ctx.doFill = true;
	} else {
		ctx.fill();
	}
}

/**
 * Returns variables in workingCanvas or given canvas
 *
 * @param {string} [canvasName] id of canvas to get the data.
 * @returns {Object}
 */
export function getContextStates(canvasName) {
	let ctx = C.contextList[canvasName] || C.workingContext;
	return {
		background: ctx.background,
		colorMode: ctx.colorMode,
		strokeStyle: ctx.strokeStyle,
		fillStyle: ctx.fillStyle,

		lineWidth: ctx.lineWidth,

		doStroke: ctx.doStroke,
		doFill: ctx.doFill,
		pathStarted: ctx.pathStarted,
		yAxisInverted: ctx.yAxisInverted,
		xAxisInverted: ctx.xAxisInverted,

		netRotation: ctx.netRotation,

		fontStyle: ctx.fontStyle,
		fontVariant: ctx.fontVariant,
		fontWeight: ctx.fontWeight,
		fontStretch: ctx.fontStretch,
		fontSize: ctx.fontSize,
		lineHeight: ctx.lineHeight,
		fontFamily: ctx.fontFamily,
		font: ctx.font,

		textAlign: ctx.textAlign,
		textBaseline: ctx.textBaseline,

		events: ctx.events,
	};
}

/**
 * Starts a new loop
 * ! Currently in progress with asynchronous animations.
 * @param {Function} functionToRun function which contains code to run
 * @param {string} canvasName name of canvas. It must be unique if you're running multiple animation at once
 * @param {number} timeDelay time delay between 2 frames. If given loop will execute with setInterval function.
 *  If not provided the loop will be run with requestAnimationFrame (this keeps a consistant frame rate between 40 to 50 FPS).
 * @param {number} [timeDelaysToRemember=10] number of time delays to remember.
 */
export function loop(
	name,
	functionToRun,
	canvasName,
	timeDelay,
	timeDelaysToRemember = 100,
	settings = {},
	dur,
) {
	let ctx;

	// if name isn't given it will shift the arguments to right
	if (typeof name == "function") {
		// shift arguments
		name = counter.loop++;
		functionToRun = arguments[0];
		canvasName = arguments[1];
		timeDelay = arguments[2];
		settings = arguments[3];
		dur = arguments[4];
	}
	if (!canvasName) {
		ctx = C.workingContext;
		canvasName = ctx.name;
	} else ctx = C.contextList[canvasName];
	ctx.timeDelayList = [];
	ctx.totalTimeCaptured = 0;
	let assignedSettings = Object.assign(getContextStates(canvasName) || {}, settings);
	// debugger;
	if (ctx.currentLoop != undefined) {
		// already a animation is running
		if (C.debugAnimations) {
			console.log(canvasName + ": " + name + " %cdelayed", logStyles.delayed);
			C._ANIMATIONLOG_.push({
				canvas: ctx,
				animationName: name,
				state: "delayed",
				settings: assignedSettings,
			});
		}
		ctx.delayedAnimations.push({
			name: name,
			settings: assignedSettings,
			functionToRun: functionToRun,
			canvasName: canvasName,
			timeDelay: timeDelay,
			timeDelaysToRemember: timeDelaysToRemember,
			dur: dur,
		});
	} else {
		if (C.debugAnimations) {
			let toLog = `${canvasName}: ${name} %crunning`,
				styles = [logStyles.running];
			if (dur != undefined) {
				toLog += `%c for %c${dur}ms`;
				styles.push(logStyles.keyword, logStyles.number);
			}
			C._ANIMATIONLOG_.push({
				canvas: ctx,
				animationName: name,
				state: "running",
				settings: assignedSettings,
				dur: dur,
			});
			console.log(toLog, ...styles);
		}
		ctx.recentTimeStamp = performance.now();
		ctx.timeStart = performance.now();
		if (!isNaN(timeDelay)) {
			ctx.currentLoopName = name;
			ctx.currentLoop = setInterval(function () {
				C.workingContext = ctx;
				let S = getContextStates(canvasName);
				defineProperties(assignedSettings, C.workingContext);
				functionToRun(performance.now() - ctx.timeStart, getFPS());
				defineProperties(S, C.workingContext);
			}, timeDelay);
		} else {
			run();
		}
	}
	function run() {
		ctx.currentLoop = globalThis.requestAnimationFrame(run);
		C.workingContext = ctx;
		let S = getContextStates(canvasName);
		if (settings) defineProperties(assignedSettings, C.workingContext);
		functionToRun(performance.now() - ctx.timeStart, getFPS());
		if (settings) defineProperties(S, C.workingContext);
	}

	function getFPS() {
		let now = performance.now(),
			timeDelay = now - ctx.recentTimeStamp; // time delays between frames
		ctx.recentTimeStamp = now;
		ctx.timeDelayList.push(timeDelay);
		ctx.totalTimeCaptured += timeDelay;
		if (ctx.timeDelayList.length > timeDelaysToRemember)
			ctx.totalTimeCaptured -= ctx.timeDelayList.shift();
		return ctx.timeDelayList.length / (ctx.totalTimeCaptured / 1000);
	}
}

/**
 * Stops current loop
 *
 * @param {string} [canvasName] name of the canvas given to {@link loop}
 * @param {number} [time] time of execution. Used for debugging
 */
export function noLoop(canvasName, time) {
	let ctx = C.workingContext;
	if (!canvasName) canvasName = ctx.name;
	else ctx = C.contextList[canvasName];
	clearInterval(ctx.currentLoop);
	globalThis.cancelAnimationFrame(ctx.currentLoop);
	ctx.currentLoop = undefined;
	if (C.debugAnimations) {
		let toLog = `${canvasName}: ${ctx.currentLoopName} %cfinished`,
			formatter = [logStyles.finished];
		if (time != undefined) {
			toLog += `%c in %c${time.toFixed(3)}ms`;
			formatter.push(logStyles.keyword, logStyles.number);
		}
		console.log(toLog, ...formatter);
		C._ANIMATIONLOG_.push({
			canvas: ctx,
			animationName: ctx.currentLoopName,
			state: "finished",
			endTime: time,
		});
	}
	if (ctx.delayedAnimations.length > 0) {
		let toWork = ctx.delayedAnimations.shift();
		loop(
			toWork.name,
			toWork.functionToRun,
			toWork.canvasName,
			toWork.timeDelay,
			toWork.timeDelaysToRememberm,
			toWork.settings,
			toWork.dur,
		);
	}
}

/**
 * Starts a new Path
 *
 */
export function startShape() {
	let ctx = C.workingContext;
	ctx.beginPath();
	ctx.pathStarted = true;
}

/**
 * Ends current Path
 *
 */
export function endShape() {
	let ctx = C.workingContext;
	ctx.closePath();
	ctx.pathStarted = false;
}

/**
 * Return current font
 *
 * @param {boolean} detailed wheather to return a detailed font property
 * @returns {string}
 */
export function getFont(detailed = false) {
	let ctx = C.workingContext;
	if (detailed) {
		let {
			fontStyle,
			fontVariant,
			fontWeight,
			fontStretch,
			fontSize,
			lineHeight,
			fontFamily,
		} = ctx;
		return `${fontStyle} ${fontVariant} ${fontWeight} ${fontStretch} ${fontSize}/${lineHeight} ${fontFamily}`;
	} else {
		return ctx.font;
	}
}

/**
 * Returns text metrics
 *
 * @param {string} text
 * @returns {TextMetrics}
 */
export function measureText(text) {
	return C.workingContext.measureText(text);
}

/**
 * Sets font size
 * See {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font} for more info.
 * @param {number|string} size
 */
export function fontSize(size) {
	let ctx = C.workingContext;
	size = typeof size === "number" ? size + "px" : size;
	ctx.fontSize = size;
	ctx.font = getFont(true);
}

/**
 * Sets font family
 *
 * @param {string} family
 */
export function fontFamily(family) {
	let ctx = C.workingContext;
	ctx.fontFamily = family;
	ctx.font = getFont(true);
}

/**
 * Sets font style
 *
 * @param {string} style
 * possible values:
 * * NORMAL
 * * ITALIC
 * * OBLIQUE [&lt;angle>]
 */
export function fontStyle(style) {
	let ctx = C.workingContext;
	ctx.fontStyle = style;
	ctx.font = getFont(true);
}

/**
 * Sets font variant
 * See {@link https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant} for more info.
 *
 * @param {string} variant
 */
export function fontVariant(variant) {
	let ctx = C.workingContext;
	ctx.fontVariant = variant;
	ctx.font = getFont(true);
}

/**
 * Sets font weight
 * See {@link https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight} for more info.
 * @param {string} weight
 */
export function fontWeight(weight) {
	let ctx = C.workingContext;
	ctx.fontWeight = weight;
	ctx.font = getFont(true);
}

/**
 * Sets font stretch
 * See {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font} for more info.
 *
 *  @global
 * @param {string} stretch
 * possible values:
 * * ULTRA_CONDENSED
 * * EXTRA_CONDENSED
 * * CONDENSED
 * * SEMI_CONDENSED
 * * NORMAL
 * * SEMI_EXPANDED
 * * EXPANDED
 * * EXTRA_EXPANDED
 * * ULTRA_EXPANDED
 * * &lt;percentage>
 */
export function fontStretch(stretch) {
	let ctx = C.workingContext;
	ctx.fontStretch = stretch;
	ctx.font = getFont(true);
}

/**
 * Sets line height
 * See {@link https://developer.mozilla.org/en-US/docs/Web/CSS/line-height} for more info.
 *
 * @param {string} height
 */
export function lineHeight(height) {
	let ctx = C.workingContext;
	ctx.lineHeight = height;
	ctx.font = getFont(true);
}

/**
 * Returns canvas image data as string
 *
 * @param {string} datURL
 * @returns {string}
 */
export function getCanvasData(datURL = "image/png") {
	return C.workingContext.canvas.toDataURL(datURL);
}

/**
 * puts a imageData to canvas
 */
export function putImageData() {
	C.workingContext.putImageData(...arguments);
}

/**
 * Save the canvas as image
 *
 * @param {string} [name="drawing"] name of file
 * @param {string} [datURL="image/png"] type of file
 */
export function saveCanvas(name = "drawing", datURL = "image/png") {
	let link = getCanvasData().replace(datURL, "image/octet-stream"),
		a = document.createElement("a");
	a.download = name + ".png";
	a.href = link;
	a.click();
}

/**
 * Sets the line dash
 * see {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash} for more info
 *
 */
export function lineDash() {
	C.workingContext.setLineDash([...arguments]);
}

/**
 * Specifies the current text alignment used when drawing text.
 * The alignment is relative to the x value of the fillText/strokeText/text method.
 *
 * @param {string} align alignment type.
 * possible values:
 *  * "left" : The text is left-aligned.
 *  * "right" : The text is right-aligned.
 *  * "center" : The text is centered.
 *  * "start" : The text is aligned at the normal start of the line (left-aligned for left-to-right locales, right-aligned for right-to-left locales).
 *  * "end": The text is aligned at the normal end of the line (right-aligned for left-to-right locales, left-aligned for right-to-left locales).
 * NOTE: You can use constants LEFT, RIGHT, CENTER, START, and END for aligning
 */
export function textAlign(align) {
	C.workingContext.textAlign = align;
}

/**
 * Specifies the current text baseline used when drawing text.
 * The alignment is relative to the x value of the fillText/strokeText/text method.
 *
 * @param {string} baseline baseline type.
 * possible values:
 * * "top": The text baseline is the top of the em square.
 * * "hanging": The text baseline is the hanging baseline. (Used by Tibetan and other Indic scripts.)
 * * "middle": The text baseline is the middle of the em square.
 * * "alphabetic": The text baseline is the normal alphabetic baseline. Default value.
 * * "ideographic": The text baseline is the ideographic baseline; this is the bottom of the body of the characters, if the main body of characters protrudes beneath the alphabetic baseline. (Used by Chinese, Japanese, and Korean scripts.)
 * * "bottom": The text baseline is the bottom of the bounding box. This differs from the ideographic baseline in that the ideographic baseline doesn't consider descenders.
 * NOTE: You can use constants TOP, HANGING, MIDDLE, ALPHABETIC, IDEOGRAPHIC, BOTTOM for baseline
 */
export function textBaseline(baseline) {
	C.workingContext.textBaseline = baseline;
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
