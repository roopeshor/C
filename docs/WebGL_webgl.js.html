<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>WebGL/webgl.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="m4_m4.html">m4</a></li><li><a href="WebGL.html">WebGL</a><ul class='methods'><li data-type='method'><a href="WebGL.html#background">background</a></li><li data-type='method'><a href="WebGL.html#clear">clear</a></li><li data-type='method'><a href="WebGL.html#createCustomProgram">createCustomProgram</a></li><li data-type='method'><a href="WebGL.html#createProgram">createProgram</a></li><li data-type='method'><a href="WebGL.html#createProgramFromSource">createProgramFromSource</a></li><li data-type='method'><a href="WebGL.html#createShader">createShader</a></li><li data-type='method'><a href="WebGL.html#fill">fill</a></li><li data-type='method'><a href="WebGL.html#fillRect">fillRect</a></li><li data-type='method'><a href="WebGL.html#rotateX">rotateX</a></li><li data-type='method'><a href="WebGL.html#rotateY">rotateY</a></li><li data-type='method'><a href="WebGL.html#rotateZ">rotateZ</a></li><li data-type='method'><a href="WebGL.html#scale">scale</a></li><li data-type='method'><a href="WebGL.html#setGeometry">setGeometry</a></li><li data-type='method'><a href="WebGL.html#stroke">stroke</a></li><li data-type='method'><a href="WebGL.html#translate">translate</a></li><li data-type='method'><a href="WebGL.html#triangle">triangle</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Arithmetic-Functions.html">Arithmetic-Functions</a><ul class='methods'><li data-type='method'><a href="module-Arithmetic-Functions.html#.gcd">gcd</a></li><li data-type='method'><a href="module-Arithmetic-Functions.html#.gcdArray">gcdArray</a></li><li data-type='method'><a href="module-Arithmetic-Functions.html#.lcm">lcm</a></li><li data-type='method'><a href="module-Arithmetic-Functions.html#.lcmArray">lcmArray</a></li></ul></li><li><a href="module-Arrows.html">Arrows</a><ul class='methods'><li data-type='method'><a href="module-Arrows.html#.arrow">arrow</a></li><li data-type='method'><a href="module-Arrows.html#.arrowTip">arrowTip</a></li><li data-type='method'><a href="module-Arrows.html#.curvedArrow">curvedArrow</a></li><li data-type='method'><a href="module-Arrows.html#.curvedArrowBetweenPoints">curvedArrowBetweenPoints</a></li><li data-type='method'><a href="module-Arrows.html#.curvedDoubleArrow">curvedDoubleArrow</a></li><li data-type='method'><a href="module-Arrows.html#.curvedDoubleArrowBetweenPoints">curvedDoubleArrowBetweenPoints</a></li><li data-type='method'><a href="module-Arrows.html#.doubleArrow">doubleArrow</a></li><li data-type='method'><a href="module-Arrows.html#.measurement">measurement</a></li></ul></li><li><a href="module-Braces.html">Braces</a><ul class='methods'><li data-type='method'><a href="module-Braces.html#.arcBrace">arcBrace</a></li><li data-type='method'><a href="module-Braces.html#.curlyBrace">curlyBrace</a></li></ul></li><li><a href="module-Color-Converters.html">Color-Converters</a><ul class='methods'><li data-type='method'><a href="module-Color-Converters.html#.HSLToRGB">HSLToRGB</a></li><li data-type='method'><a href="module-Color-Converters.html#.HSVToRGB">HSVToRGB</a></li><li data-type='method'><a href="module-Color-Converters.html#.RGBToHSL">RGBToHSL</a></li><li data-type='method'><a href="module-Color-Converters.html#.RGBToHSV">RGBToHSV</a></li></ul></li><li><a href="module-Color-Gradient.html">Color-Gradient</a><ul class='methods'><li data-type='method'><a href="module-Color-Gradient.html#.linearGradient">linearGradient</a></li></ul></li><li><a href="module-Color-Lerp.html">Color-Lerp</a><ul class='methods'><li data-type='method'><a href="module-Color-Lerp.html#.getInterpolatedColorList">getInterpolatedColorList</a></li><li data-type='method'><a href="module-Color-Lerp.html#.lerpColor">lerpColor</a></li><li data-type='method'><a href="module-Color-Lerp.html#.lerpColorArray">lerpColorArray</a></li><li data-type='method'><a href="module-Color-Lerp.html#.lerpColorObject">lerpColorObject</a></li></ul></li><li><a href="module-Color-Palettes.html">Color-Palettes</a></li><li><a href="module-Color-Reader.html">Color-Reader</a><ul class='methods'><li data-type='method'><a href="module-Color-Reader.html#.readColor">readColor</a></li></ul></li><li><a href="module-Colors.html">Colors</a></li><li><a href="module-Coordinate-Systems.html">Coordinate-Systems</a><ul class='methods'><li data-type='method'><a href="module-Coordinate-Systems.html#.axes">axes</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#.numberLine">numberLine</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#.numberPlane">numberPlane</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#.polarPlane">polarPlane</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#~getCartasianPlotters">getCartasianPlotters</a></li><li data-type='method'><a href="module-Coordinate-Systems.html#~getPolarPlotters">getPolarPlotters</a></li></ul></li><li><a href="module-Extra-Shapes.html">Extra-Shapes</a><ul class='methods'><li data-type='method'><a href="module-Extra-Shapes.html#.lens">lens</a></li><li data-type='method'><a href="module-Extra-Shapes.html#.polygonWithRatioOfCentralAngles">polygonWithRatioOfCentralAngles</a></li></ul></li><li><a href="module-Geometric-Shapes.html">Geometric-Shapes</a><ul class='methods'><li data-type='method'><a href="module-Geometric-Shapes.html#.angle">angle</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.annulus">annulus</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.annulusSector">annulusSector</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.arc">arc</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.arcBetweenPoints">arcBetweenPoints</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.bezier">bezier</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.circle">circle</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.circularSegment">circularSegment</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.ellipse">ellipse</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.equiTriangle">equiTriangle</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.getBezierControlPoints">getBezierControlPoints</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.line">line</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.point">point</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.polygon">polygon</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.quad">quad</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.rect">rect</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.regularPolygon">regularPolygon</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.regularPolygonWithRadius">regularPolygonWithRadius</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.sector">sector</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.smoothCurveThroughPoints">smoothCurveThroughPoints</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.smoothCurveThroughPointsTo">smoothCurveThroughPointsTo</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.square">square</a></li><li data-type='method'><a href="module-Geometric-Shapes.html#.triangle">triangle</a></li></ul></li><li><a href="module-Image.html">Image</a><ul class='methods'><li data-type='method'><a href="module-Image.html#.drawImage">drawImage</a></li><li data-type='method'><a href="module-Image.html#.loadImage">loadImage</a></li><li data-type='method'><a href="module-Image.html#.loadImagePromise">loadImagePromise</a></li><li data-type='method'><a href="module-Image.html#.pixel">pixel</a></li></ul></li><li><a href="module-Image-Processing.html">Image-Processing</a><ul class='methods'><li data-type='method'><a href="module-Image-Processing.html#.getPixelColor">getPixelColor</a></li><li data-type='method'><a href="module-Image-Processing.html#.hasNeighbourColor">hasNeighbourColor</a></li><li data-type='method'><a href="module-Image-Processing.html#.imageDataToColorArray">imageDataToColorArray</a></li><li data-type='method'><a href="module-Image-Processing.html#.imageToData">imageToData</a></li><li data-type='method'><a href="module-Image-Processing.html#.replaceColorInImage">replaceColorInImage</a></li></ul></li><li><a href="module-Plottter-Functions.html">Plottter-Functions</a><ul class='methods'><li data-type='method'><a href="module-Plottter-Functions.html#.functionGraph">functionGraph</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.heatPlot">heatPlot</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.parametricFunction">parametricFunction</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.plotPoints">plotPoints</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.plotPolarPoints">plotPolarPoints</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.polarFuntionGraph">polarFuntionGraph</a></li><li data-type='method'><a href="module-Plottter-Functions.html#.polarParametricFunction">polarParametricFunction</a></li></ul></li><li><a href="module-Point-Utils.html">Point-Utils</a><ul class='methods'><li data-type='method'><a href="module-Point-Utils.html#.circleIntersection">circleIntersection</a></li><li data-type='method'><a href="module-Point-Utils.html#.dist">dist</a></li><li data-type='method'><a href="module-Point-Utils.html#.extendFromOrigin">extendFromOrigin</a></li><li data-type='method'><a href="module-Point-Utils.html#.extendFromPoint">extendFromPoint</a></li><li data-type='method'><a href="module-Point-Utils.html#.lineIntersection">lineIntersection</a></li><li data-type='method'><a href="module-Point-Utils.html#.rotateAroundOrigin">rotateAroundOrigin</a></li><li data-type='method'><a href="module-Point-Utils.html#.rotateAroundPoint">rotateAroundPoint</a></li></ul></li><li><a href="module-Random-Colors.html">Random-Colors</a><ul class='methods'><li data-type='method'><a href="module-Random-Colors.html#.randomColor">randomColor</a></li><li data-type='method'><a href="module-Random-Colors.html#.randomDefinedColor">randomDefinedColor</a></li></ul></li><li><a href="module-Random-Functions.html">Random-Functions</a><ul class='methods'><li data-type='method'><a href="module-Random-Functions.html#.randomInt">randomInt</a></li></ul></li><li><a href="module-Settings.html">Settings</a><ul class='methods'><li data-type='method'><a href="module-Settings.html#.background">background</a></li><li data-type='method'><a href="module-Settings.html#.clear">clear</a></li><li data-type='method'><a href="module-Settings.html#.cssBackground">cssBackground</a></li><li data-type='method'><a href="module-Settings.html#.endShape">endShape</a></li><li data-type='method'><a href="module-Settings.html#.fill">fill</a></li><li data-type='method'><a href="module-Settings.html#.fontFamily">fontFamily</a></li><li data-type='method'><a href="module-Settings.html#.fontSize">fontSize</a></li><li data-type='method'><a href="module-Settings.html#.fontStyle">fontStyle</a></li><li data-type='method'><a href="module-Settings.html#.fontVariant">fontVariant</a></li><li data-type='method'><a href="module-Settings.html#.fontWeight">fontWeight</a></li><li data-type='method'><a href="module-Settings.html#.getCanvasData">getCanvasData</a></li><li data-type='method'><a href="module-Settings.html#.getContextStates">getContextStates</a></li><li data-type='method'><a href="module-Settings.html#.getFont">getFont</a></li><li data-type='method'><a href="module-Settings.html#.invertXAxis">invertXAxis</a></li><li data-type='method'><a href="module-Settings.html#.invertYAxis">invertYAxis</a></li><li data-type='method'><a href="module-Settings.html#.lineCap">lineCap</a></li><li data-type='method'><a href="module-Settings.html#.lineDash">lineDash</a></li><li data-type='method'><a href="module-Settings.html#.lineHeight">lineHeight</a></li><li data-type='method'><a href="module-Settings.html#.lineJoin">lineJoin</a></li><li data-type='method'><a href="module-Settings.html#.lineTo">lineTo</a></li><li data-type='method'><a href="module-Settings.html#.loop">loop</a></li><li data-type='method'><a href="module-Settings.html#.measureText">measureText</a></li><li data-type='method'><a href="module-Settings.html#.moveTo">moveTo</a></li><li data-type='method'><a href="module-Settings.html#.noFill">noFill</a></li><li data-type='method'><a href="module-Settings.html#.noLoop">noLoop</a></li><li data-type='method'><a href="module-Settings.html#.noStroke">noStroke</a></li><li data-type='method'><a href="module-Settings.html#.putImageData">putImageData</a></li><li data-type='method'><a href="module-Settings.html#.rest">rest</a></li><li data-type='method'><a href="module-Settings.html#.restore">restore</a></li><li data-type='method'><a href="module-Settings.html#.rotate">rotate</a></li><li data-type='method'><a href="module-Settings.html#.save">save</a></li><li data-type='method'><a href="module-Settings.html#.saveCanvas">saveCanvas</a></li><li data-type='method'><a href="module-Settings.html#.scale">scale</a></li><li data-type='method'><a href="module-Settings.html#.setImageSmoothing">setImageSmoothing</a></li><li data-type='method'><a href="module-Settings.html#.startShape">startShape</a></li><li data-type='method'><a href="module-Settings.html#.stroke">stroke</a></li><li data-type='method'><a href="module-Settings.html#.strokeWidth">strokeWidth</a></li><li data-type='method'><a href="module-Settings.html#.textAlign">textAlign</a></li><li data-type='method'><a href="module-Settings.html#.textBaseline">textBaseline</a></li><li data-type='method'><a href="module-Settings.html#.transform">transform</a></li><li data-type='method'><a href="module-Settings.html#.translate">translate</a></li></ul></li><li><a href="module-Tex.html">Tex</a><ul class='methods'><li data-type='method'><a href="module-Tex.html#.getImageFromTex">getImageFromTex</a></li><li data-type='method'><a href="module-Tex.html#.tex">tex</a></li></ul></li><li><a href="module-text.html">text</a><ul class='methods'><li data-type='method'><a href="module-text.html#.fillText">fillText</a></li><li data-type='method'><a href="module-text.html#.strokeText">strokeText</a></li><li data-type='method'><a href="module-text.html#.text">text</a></li></ul></li><li><a href="module-Utils.html">Utils</a><ul class='methods'><li data-type='method'><a href="module-Utils.html#.arange">arange</a></li><li data-type='method'><a href="module-Utils.html#.defineProperties">defineProperties</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#C">C</a></li><li><a href="global.html#createWebGL">createWebGL</a></li><li><a href="global.html#fontStretch">fontStretch</a></li><li><a href="global.html#generatePointsInArc">generatePointsInArc</a></li><li><a href="global.html#quadraticCurve">quadraticCurve</a></li><li><a href="global.html#readMatrix">readMatrix</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">WebGL/webgl.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { C } from "../main.js";
import { applyDefault } from "../utils.js";
import { m4 } from "./m4.js";
/**
 * Creates a WebGL instance thati include usefullkj methods to work with WebGL.
 * @param {Object} [configs] configuration for canvas. Follwoing properties are accepted:
 * @param	{boolean} [configs.deleteOld=false] whether to delete old canvas.
 * @returns {WebGL} WebGL instance
 */
export function createWebGL(configs) {
	let c = C.workingContext;
	const cv = C.workingCanvas;
	configs = applyDefault(
		{
			deleteOld: false,
			dpr: Math.ceil(globalThis.devicePixelRatio),
			width: cv.rWidth,
			height: cv.rHeight,
		},
		configs,
	);
	let container = c.canvas.parentElement;
	let cvs = C.makeCanvas(configs);
	if (configs.deleteOld) {
		container.removeChild(c.canvas);
	} else {
		container.style.position = "relative";
		cvs.style.position = "absolute";
		cvs.style.top = "0";
		cvs.style.left = "0";
	}

	// attach active listeners from canvas
	for (let event in c.canvas.events) {
		cvs.addEventListener(event, c.canvas.events[event]);
	}
	container.appendChild(cvs);
	return new WebGL(cvs);
}
/**
 * Creates a new instance for drawing in webgl
 */
export class WebGL {
	constructor(canvas) {
		let gl = canvas.getContext("webgl");
		if (!gl) {
			gl = canvas.getContext("experimental-webgl");
		}
		if (!gl) {
			throw new Error("WebGL is not supported");
		}
		gl.viewport(0, 0, canvas.width, canvas.height);
		// make it transparent so that standard canvas can be seen
		/** @type {WebGLRenderingContext} */
		this.gl = gl;
		/** @type {HTMLCanvasElement} */
		this.canvas = canvas;
		/** @type number */
		this.width = canvas.rWidth;
		/** @type number */
		this.height = canvas.rHeight;
		/** @type number */
		this.dpr = canvas.dpr || Math.ceil(globalThis.devicePixelRatio);
		this.canvas = canvas;
		this.sources = {
			// one color for all vertex
			singleColor: {
				vertex: `attribute vec3 a_position;
					uniform vec2 u_resolution;
					uniform mat4 u_matrix;

					void main() {
						gl_Position = u_matrix * vec4(a_position, 1) / vec4(u_resolution, 1, 1);
					}`,
				fragment: `precision mediump float;
					uniform vec4 u_color;
					void main() {
						gl_FragColor = u_color;
					}`,
				uniforms: {
					resolution: "u_resolution",
					matrix: "u_matrix",
					vertexColor: "u_color",
				},
				attributes: {
					vertexPosition: "a_position",
				},
				program: null,
			},
			// one color for each vertex
			multiColor: {
				vertex: `attribute vec3 a_position;
					attribute vec4 aVertexColor;
					uniform vec2 u_resolution;
					uniform mat4 u_matrix;
					varying lowp vec4 vColor;
					void main() {
						gl_Position = u_matrix * vec4(a_position, 1);
						// / vec4(u_resolution, 1, 1);
						vColor = aVertexColor;
					}`,
				fragment: `precision mediump float;
					varying lowp vec4 vColor;
					void main(void) {
						gl_FragColor = vColor;
					}`,
				uniforms: {
					resolution: "u_resolution",
					matrix: "u_matrix",
				},
				attributes: {
					vertexPosition: "a_position",
					vertexColor: "aVertexColor",
				},
				program: null,
			},
		};
		for (let source in this.sources) {
			this.sources[source] = this.createCustomProgram(this.sources[source]);
		}
		/**
		 * Current using program
		 */
		this.program = this.sources.singleColor;
		gl.useProgram(this.program.program);
		/**
		 * Projection matrix
		 * @type {m4}
		 */
		this.projectionMatrix = new m4();
		/**
		 * Model/world matrix
		 * @type {m4}
		 */
		this.worldMatrix = new m4();
		/**
		 * View matrix
		 * @type {m4}
		 */
		this.viewMatrix = new m4();
		/**
		 * Composition of all matricies
		 * @type {m4}
		 */
		this.matrix = new m4();
		// set the resolution
		gl.uniform2f(
			this.program.uniforms.resolution,
			canvas.width / 2 / this.dpr,
			canvas.height / 2 / this.dpr,
		);
		this.styles = {
			/** Color to fill inside the shape */
			fillColor: [1, 0, 1, 1],
			/** Color given to the border of shape &amp;  for lines */
			strokeColor: [1, 1, 0, 1],
			/** Width of line */
			lineWidth: 1,
		};
	}
	useProgram(program) {
		if (this.sources[program]) {
			this.program = this.sources[program];
			this.gl.useProgram(this.program.program);
			this.gl.uniform2f(
				this.program.uniforms.resolution,
				this.canvas.width / 2 / this.dpr,
				this.canvas.height / 2 / this.dpr,
			);
		} else if (program.program) {
			this.program = program;
			this.gl.useProgram(program.program);
		} else {
			throw new Error(`${program} not fouund`);
		}
	}
	/**
	 * Returns a shader from given source and type
	 * @param {number} type either gl.VERTEX_SHADER or gl.FRAGMENT_SHADER
	 * @param {string} source source code of shader
	 * @returns {WebGLShader} shader
	 */
	createShader(type, source) {
		const shader = this.gl.createShader(type);
		this.gl.shaderSource(shader, source);
		this.gl.compileShader(shader);
		if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {
			console.error(this.gl.getShaderInfoLog(shader));
			this.gl.deleteShader(shader);
			return null;
		}
		return shader;
	}
	/**
	 * creates a program from given shaders
	 * @param {WebGLShader} vertexShader
	 * @param {WebGLShader} fragmentShader
	 * @returns {WebGLProgram}
	 */
	createProgram(vertexShader, fragmentShader) {
		const program = this.gl.createProgram();
		this.gl.attachShader(program, vertexShader);
		this.gl.attachShader(program, fragmentShader);
		this.gl.linkProgram(program);
		if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {
			console.error(this.gl.getProgramInfoLog(program));
			this.gl.deleteProgram(program);
			return null;
		}
		return program;
	}
	/**
	 * Creates program from given vertex and fragment shader source
	 * @param {string} vertexShaderSource
	 * @param {string} fragmentShaderSource
	 * @returns {WebGLProgram}
	 */
	createProgramFromSource(vertexShaderSource, fragmentShaderSource) {
		const vertexShader = this.createShader(this.gl.VERTEX_SHADER, vertexShaderSource);
		const fragmentShader = this.createShader(
			this.gl.FRAGMENT_SHADER,
			fragmentShaderSource,
		);
		return this.createProgram(vertexShader, fragmentShader);
	}
	resizeCanvas(width = 300, height = 300) {
		// Lookup the size the browser is displaying the canvas in CSS pixels.
		const dpr = globalThis.devicePixelRatio;
		const displayWidth = Math.round(width * dpr);
		const displayHeight = Math.round(height * dpr);
		// Make the canvas the same size
		this.canvas.style.width = width + "px";
		this.canvas.style.height = height + "px";
		this.canvas.width = displayWidth;
		this.canvas.height = displayHeight;
	}
	putProperties() {
		let gl = this.gl,
			numComponents = 3,
			type = gl.FLOAT,
			normalize = false,
			stride = 0,
			offset = 0;
		const positionBuffer = gl.createBuffer();
		// Select the positionBuffer as the one to apply buffer
		// operations to from here out.
		gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
		gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
		gl.vertexAttribPointer(
			this.program.attributes.vertexPosition,
			numComponents,
			type,
			normalize,
			stride,
			offset,
		);
		gl.enableVertexAttribArray(this.program.attributes.vertexPosition);
		// Tell WebGL how to pull out the colors from the color buffer
		// into the vertexColor attribute.
		numComponents = 4;
		type = gl.FLOAT;
		normalize = false;
		stride = 0;
		offset = 0;
		gl.bindBuffer(gl.ARRAY_BUFFER, this.program.uniforms.vertexColor);
		gl.vertexAttribPointer(
			this.program.uniforms.vertexColor,
			numComponents,
			type,
			normalize,
			stride,
			offset,
		);
	}

	/**
	 * Creates a custom program from sources and retuns program and variables
	 * @param {Object} program program that contains shader sources and variables of shaders
	 * @param {string|HTMLScriptElement} program.vertex vertex shader program
	 * @param {string|HTMLScriptElement} program.fragment fragment shader program
	 * @param {Object.&lt;string,string>} program.uniforms uniform variables of program. format: {uniformName: name_in_shader}
	 * @param {Object.&lt;string,string>} program.attributes attributes of program. format: {attrName: name_in_shader}
	 */
	createCustomProgram(program) {
		let gl = this.gl,
			uniforms = {},
			attributes = {},
			program_;

		if (program.vertex instanceof HTMLScriptElement) {
			program.vertex = program.vertex.textContent.trim();
		}
		if (program.fragment instanceof HTMLScriptElement) {
			program.fragment = program.fragment.textContent.trim();
		}
		program_ = this.createProgramFromSource(program.vertex, program.fragment);
		for (let attr in program.attributes) {
			let nameInProgram = program.attributes[attr];
			attributes[attr] = gl.getAttribLocation(program_, nameInProgram);
			// gl.enableVertexAttribArray(src[attr]); // TODO: should all attributes be enabled?
		}
		for (let uniform in program.uniforms) {
			let nameInProgram = program.uniforms[uniform];
			uniforms[uniform] = gl.getUniformLocation(program_, nameInProgram);
		}
		return {
			program: program_,
			uniforms: uniforms,
			attributes: attributes,
			vertex: program.vertex,
			fragment: program.fragment,
		};
	}

	attribUsage(
		position,
		components = 3,
		type = this.gl.FLOAT,
		normalize = false,
		stride = 0,
		offset = 0,
	) {
		this.gl.enableVertexAttribArray(position);
		this.gl.vertexAttribPointer(
			position, // position of attribute
			components, // components to pull per iteration
			type, // type of the data
			normalize, // whether normalize the data
			stride, // 0 = move forward size * sizeof(type) each iteration to get the next position
			offset, // where to start
		);
	}
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
